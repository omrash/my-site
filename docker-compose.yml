version: '3.8'

services:
  web:
    image: ghcr.io/omrash/my-site:latest
    ports:
      - "80:3000"
    restart: unless-stopped
    environment:
      - NODE_ENV=production

  # Auto-update service - monitors GitHub Container Registry
  watchtower:
    image: nicholas-fedor/watchtower:latest
    environment:
      - WATCHtower_poll_interval=30m
      - WATCHtower_labels=enabled=true
    volumes:
      - /var/run/docker.sock:/var/run/docker.sock
    restart: unless-stopped
